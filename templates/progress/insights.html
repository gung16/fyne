{% extends 'base.html' %}

{% block page_title %}Insights{% endblock %}

{% block content %}
<div class="card">
    <h2 style="color: var(--primary-dark); margin-bottom: 10px;">Your Insights ðŸ’¡</h2>
    <p class="text-small" style="color: var(--dark-gray);">Personalized recommendations for better skin health</p>
</div>

<!-- Most Recent Score -->
{% if latest_score %}
<div class="card">
    <h3 class="card-title mb-10">Your Latest Score</h3>
    <div class="score-circle" style="width: 120px; height: 120px; margin: 20px auto;">
        <div class="score-value" style="font-size: 32px;">{{ latest_score|floatformat:0 }}</div>
        <div class="score-label">Overall</div>
    </div>
    <p style="text-align: center; color: var(--text-medium); font-size: 14px; margin-top: 10px;">
        {% if latest_score >= 80 %}
        Excellent! Your skin is in great shape. Keep up the good work! âœ¨
        {% elif latest_score >= 60 %}
        Good progress! A few adjustments can help you reach your goals.
        {% else %}
        There's room for improvement. Try these microhabits to boost your score.
        {% endif %}
    </p>
</div>
{% else %}
<div class="card">
    <div class="empty-state">
        <div class="empty-icon">ðŸ“Š</div>
        <div class="empty-title">No Score Yet</div>
        <div class="empty-text">Complete a checkpoint to see your insights</div>
        <a href="{% url 'checkpoints:daily_checkpoint' %}" class="btn btn-primary" style="margin-top: 15px;">
            <i class="fas fa-camera"></i> Take Checkpoint
        </a>
    </div>
</div>
{% endif %}

<!-- Microhabits -->
<div class="card">
    <h3 class="card-title mb-10">
        <i class="fas fa-seedling" style="color: var(--secondary-pink); margin-right: 8px;"></i>
        Daily Microhabits
    </h3>
    <p style="color: var(--text-medium); font-size: 14px; margin-bottom: 20px;">
        Small daily habits that make a big difference for your skin health
    </p>
    
    <div style="display: flex; flex-direction: column; gap: 12px;">
        <!-- Drink Water -->
        <div style="
            display: flex;
            align-items: center;
            padding: 16px;
            background: linear-gradient(135deg, #E3F2FD, #BBDEFB);
            border-radius: 16px;
            border-left: 4px solid #2196F3;
        ">
            <div style="
                width: 48px;
                height: 48px;
                background: #2196F3;
                border-radius: 12px;
                display: flex;
                align-items: center;
                justify-content: center;
                margin-right: 16px;
                color: white;
                font-size: 20px;
            ">
                <i class="fas fa-tint"></i>
            </div>
            <div style="flex: 1;">
                <div style="font-weight: 600; color: var(--text-dark); margin-bottom: 4px;">Drink Water</div>
                <div style="font-size: 13px; color: var(--text-medium);">Stay hydrated with 8+ glasses daily to keep your skin plump and glowing</div>
            </div>
        </div>
        
        <!-- Wipe Your Phone -->
        <div style="
            display: flex;
            align-items: center;
            padding: 16px;
            background: linear-gradient(135deg, #FFF3E0, #FFE0B2);
            border-radius: 16px;
            border-left: 4px solid #FF9800;
        ">
            <div style="
                width: 48px;
                height: 48px;
                background: #FF9800;
                border-radius: 12px;
                display: flex;
                align-items: center;
                justify-content: center;
                margin-right: 16px;
                color: white;
                font-size: 20px;
            ">
                <i class="fas fa-mobile-alt"></i>
            </div>
            <div style="flex: 1;">
                <div style="font-weight: 600; color: var(--text-dark); margin-bottom: 4px;">Wipe Your Phone</div>
                <div style="font-size: 13px; color: var(--text-medium);">Clean your phone screen daily to prevent bacteria transfer to your face</div>
            </div>
        </div>
        
        <!-- Don't Pop Pimples -->
        <div style="
            display: flex;
            align-items: center;
            padding: 16px;
            background: linear-gradient(135deg, #FFEBEE, #FFCDD2);
            border-radius: 16px;
            border-left: 4px solid #F44336;
        ">
            <div style="
                width: 48px;
                height: 48px;
                background: #F44336;
                border-radius: 12px;
                display: flex;
                align-items: center;
                justify-content: center;
                margin-right: 16px;
                color: white;
                font-size: 20px;
            ">
                <i class="fas fa-hand-paper"></i>
            </div>
            <div style="flex: 1;">
                <div style="font-weight: 600; color: var(--text-dark); margin-bottom: 4px;">Don't Pop Pimples</div>
                <div style="font-size: 13px; color: var(--text-medium);">Resist the urge to pop - it can cause scarring and spread bacteria</div>
            </div>
        </div>
        
        <!-- Change Pillowcases -->
        <div style="
            display: flex;
            align-items: center;
            padding: 16px;
            background: linear-gradient(135deg, #E8F5E9, #C8E6C9);
            border-radius: 16px;
            border-left: 4px solid #4CAF50;
        ">
            <div style="
                width: 48px;
                height: 48px;
                background: #4CAF50;
                border-radius: 12px;
                display: flex;
                align-items: center;
                justify-content: center;
                margin-right: 16px;
                color: white;
                font-size: 20px;
            ">
                <i class="fas fa-bed"></i>
            </div>
            <div style="flex: 1;">
                <div style="font-weight: 600; color: var(--text-dark); margin-bottom: 4px;">Change Pillowcases</div>
                <div style="font-size: 13px; color: var(--text-medium);">Wash pillowcases weekly to prevent oil and bacteria buildup</div>
            </div>
        </div>
    </div>
</div>

<!-- Additional Tips -->
<div class="card">
    <h3 class="card-title mb-10">
        <i class="fas fa-lightbulb" style="color: var(--secondary-pink); margin-right: 8px;"></i>
        Pro Tips
    </h3>
    <div style="display: flex; flex-direction: column; gap: 10px;">
        <div style="padding: 12px; background: var(--light-gray); border-radius: 12px; border-left: 3px solid var(--secondary-pink);">
            <div style="font-weight: 600; color: var(--text-dark); font-size: 14px; margin-bottom: 4px;">
                <i class="fas fa-sun" style="color: var(--secondary-pink); margin-right: 8px;"></i>
                Always Wear Sunscreen
            </div>
            <div style="font-size: 13px; color: var(--text-medium);">Even on cloudy days, UV rays can damage your skin</div>
        </div>
        
        <div style="padding: 12px; background: var(--light-gray); border-radius: 12px; border-left: 3px solid var(--secondary-pink);">
            <div style="font-weight: 600; color: var(--text-dark); font-size: 14px; margin-bottom: 4px;">
                <i class="fas fa-moon" style="color: var(--secondary-pink); margin-right: 8px;"></i>
                Get Enough Sleep
            </div>
            <div style="font-size: 13px; color: var(--text-medium);">7-9 hours of quality sleep helps your skin repair and regenerate</div>
        </div>
        
        <div style="padding: 12px; background: var(--light-gray); border-radius: 12px; border-left: 3px solid var(--secondary-pink);">
            <div style="font-weight: 600; color: var(--text-dark); font-size: 14px; margin-bottom: 4px;">
                <i class="fas fa-apple-alt" style="color: var(--secondary-pink); margin-right: 8px;"></i>
                Eat a Balanced Diet
            </div>
            <div style="font-size: 13px; color: var(--text-medium);">Nutrient-rich foods support healthy, glowing skin from within</div>
        </div>
    </div>
</div>

<!-- Action Buttons -->
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
    <a href="{% url 'progress:progress_view' %}" class="btn btn-secondary">
        <i class="fas fa-arrow-left"></i> Back to Progress
    </a>
    <a href="{% url 'checkpoints:daily_checkpoint' %}" class="btn btn-primary">
        <i class="fas fa-camera"></i> New Scan
    </a>
</div>
{% endblock %}

